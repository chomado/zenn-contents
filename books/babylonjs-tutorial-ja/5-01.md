---
title: "5-01: é ãã®ä¸˜ (Distant Hills)"
---

ã“ã®ãƒšãƒ¼ã‚¸ã®åŸæ–‡ï¼š https://doc.babylonjs.com/start/chap5/hills

# â›° 5-01: é ãã®ä¸˜ (Distant Hills)

æ‘ã‚’è°·ã«è¨­ç½®ã—ãŸã„ã§ã™ã­ã€‚

åœ°é¢ã®ãƒ¡ãƒƒã‚·ãƒ¥å¯¾ã—å‚ç›´æ–¹å‘ã®é«˜ã•ã‚’åŠ ãˆã‚‹ã“ã¨ã«ã¤ã„ã¦ã€
ãƒ¡ãƒƒã‚·ãƒ¥ã‹ã‚‰ä¸˜ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ãŒã€åˆ¥ã®æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ğŸ‘€

## ãƒã‚¤ãƒˆãƒãƒƒãƒ— (height map (é«˜ã•ãƒãƒƒãƒ—))

ç°è‰²ã®é™°å½±ã‚’ä½¿ç”¨ã—ã¦åœ°é¢ã®é«˜ã•ã‚’æ±ºå®šã™ã‚‹ãƒã‚¤ãƒˆãƒãƒƒãƒ— (height map (é«˜ã•ãƒãƒƒãƒ—)) ã‚’ä½¿ç”¨ã—ã¦å®Ÿç¾ã§ãã¾ã™ã€‚

ç™½è‰²ã®ã¨ã“ã‚ãŒã„ã¡ã°ã‚“é«˜ã„ã¨ã“ã‚ã§ã€é»’è‰²ã®ã¨ã“ã‚ãŒã„ã¡ã°ã‚“ä½ã„ã¨ã“ã‚ã§ã™ã€‚

![height map](https://doc.babylonjs.com/_next/image?url=%2Fimg%2Fhow_to%2FHeightMap%2FheightMap.png&w=1080&q=75)
â†“
![](https://storage.googleapis.com/zenn-user-upload/e00469cd1207-20220429.gif)

https://playground.babylonjs.com/#LQ4LI1

## æ‘ã®å ´åˆ

ä»Šå›ã€ç§ãŸã¡ã®æ‘ã«ã¯ã“ã®ãƒã‚¤ãƒˆãƒãƒƒãƒ—ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

![height map](https://doc.babylonjs.com/_next/image?url=%2Fimg%2Fgetstarted%2Fvillageheightmap.png&w=1080&q=75)


ã“ã®çœŸã‚“ä¸­ã®å¤§ããªé»’è‰²ã®ã‚¨ãƒªã‚¢ (è°·) ãŒæ‘ã‚’ç½®ãã¨ã“ã‚ã«ãªã‚Šã€
ãã®å‘¨ã‚Šã®ç™½è‰²ã®éƒ¨åˆ†ãŒä¸˜ã«ãªã‚Šã€
ç°è‰²ã®éƒ¨åˆ†ã¯è°·ã®å¤–ã¸ã¨ä¼¸ã³ã¦ã„ãé“è·¯ã«ãªã‚Šã¾ã™ã€‚

![](https://doc.babylonjs.com/_next/image?url=%2Fimg%2Fgetstarted%2Fvalley1.png&w=1080&q=75)


![](https://storage.googleapis.com/zenn-user-upload/04d30c6fb733-20220429.gif)

ã“ã®ç”»åƒã§ã¯ã€ã‚«ãƒ¡ãƒ©ã‚’é æ–¹ã«é…ç½®ã—ã€å‚ç›´æ–¹å‘ã®é«˜ã•ã‚‚èª¿æ•´ã—ã¦ã„ã¾ã™ (é ãã‹ã‚‰è¦‹ã¦ã‚ã‹ã‚Šã‚„ã™ãã—ã¦ã„ã¾ã™)ã€‚

```js
const largeGround = BABYLON.MeshBuilder
    .CreateGroundFromHeightMap(
        "largeGround", 
        "ãƒã‚¤ãƒˆãƒãƒƒãƒ—ã®URL", 
        {
            width:150, 
            height:150, 
            subdivisions: 20, // æ•°å€¤ã‚’å¤§ããã™ã‚‹ã»ã©æç”»ãŒç´°ã‹ããªã‚‹
            minHeight:0, 
            maxHeight: 10
        }
    );
```

@[codepen](https://codepen.io/chomado/pen/eYVOVXJ)


# âœ‚ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ `subdivisions` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã¤ã„ã¦

`MeshBuilder.CreateGroundFromHeightMap` ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ `subdivisions` (åˆ†å‰²) ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€åœ°é¢ã‚’ 20Ã—20= 400 ã«åˆ†å‰²ã—ã¦ã„ã¾ã™ã€‚
æ•°ãŒå¤šã„ã»ã©ã€é«˜ã•ã®è¨ˆç®—ã®ãŸã‚ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒç´°ã‹ããªã‚Šã¾ã™ã€‚

### ğŸ‘€ `subdivisions: 20` ã®å ´åˆ

![](https://storage.googleapis.com/zenn-user-upload/89e6bdc0fd79-20220429.png)

### ğŸ‘€ `subdivisions: 100` ã®å ´åˆ

![](https://storage.googleapis.com/zenn-user-upload/046c6e27a4e9-20220429.png)

https://playground.babylonjs.com/#KBS9I5#39


# âœ‚ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ `minHeight` ã¨ `maxHeight` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã¤ã„ã¦

`MeshBuilder.CreateGroundFromHeightMap` ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ `minHeight` ã¨ `maxHeight` ã® 2 ã¤ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€

ãã‚Œãã‚Œé»’ã„éƒ¨åˆ†ã¨ç™½ã„éƒ¨åˆ†ã®å‚ç›´æ–¹å‘ã®é«˜ã•ã‚’æ±ºã‚ã€

ç°è‰²ã®éƒ¨åˆ†ã¯ãã‚Œã«å¿œã˜ã¦ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™

### ğŸ‘€ `maxHeight: 10` ã®å ´åˆ

![](https://storage.googleapis.com/zenn-user-upload/21445d345ec0-20220429.png)

### ğŸ‘€ `maxHeight: 20` ã®å ´åˆ

![](https://storage.googleapis.com/zenn-user-upload/f237bb5414fb-20220429.png)

# ãƒ†ã‚¯ã‚¹ãƒãƒ£

é€šå¸¸ã®æ–¹æ³•ã§ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’è¿½åŠ ã§ãã¾ã™ã€‚

![](https://doc.babylonjs.com/_next/image?url=%2Fimg%2Fgetstarted%2Fvalley2.png&w=1920&q=75)

```js
const largeGroundMat = new BABYLON.StandardMaterial("largeGroundMat");
largeGroundMat.diffuseTexture = new BABYLON.Texture("https://assets.babylonjs.com/environments/valleygrass.png");

const largeGround = BABYLON.MeshBuilder
    .CreateGroundFromHeightMap(
        "largeGround", 
        "https://assets.babylonjs.com/environments/villageheightmap.png", 
        {width:150, height:150, subdivisions: 20, minHeight:0, maxHeight: 10}
    );
largeGround.material = largeGroundMat;
```

https://playground.babylonjs.com/#KBS9I5#40

## ğŸ–¼ åœ°é¢ã®ãƒ†ã‚¯ã‚¹ãƒãƒ£ä»•ä¸Šã’

æœ€å¾Œã«ã€æ‘ã®éƒ¨åˆ†ã®åœ°é¢ã«ã€ã‚ˆã‚Šæ˜ç­ãªãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ã¯ã‚Šã¾ã™ã€‚

(æ‘ä»¥å¤–ã®ã¨ã“ã‚ (é ãã®ä¸˜ã¨ã‹) ã¯å¼•ãå»¶ã°ã•ã‚ŒãŸãƒ†ã‚¯ã‚¹ãƒãƒ£ã§é©å½“ã§ã‚‚ã„ã„ã§ã™ãŒã€æ‘ã®éƒ¨åˆ†ã®åœ°é¢ã¯ãã‚Œã„ã«ã—ãŸã„ (ã‚ºãƒ¼ãƒ ã«è€ãˆã†ã‚‹æ˜ç­ã•ã«ã—ãŸã„) ã®ã§ã€æ‘ã®éƒ¨åˆ†ã ã‘åˆ¥ãƒ†ã‚¯ã‚¹ãƒãƒ£ã«ã—ã¦ä¸Šã‹ã‚‰é‡ã­ã¾ã™ã€‚)

```js
// æ‘ã®åœ°é¢ã‚’ã¤ãã‚‹
const groundMat = new BABYLON.StandardMaterial("groundMat");
groundMat.diffuseTexture = new BABYLON.Texture("url to ground texture");
groundMat.diffuseTexture.hasAlpha = true;

const ground = BABYLON.MeshBuilder.CreateGround("ground", {width:24, height:24});
ground.material = groundMat;

// å¤§ããªåœ°é¢ (å…¨ä½“ã®åœ°é¢)
const largeGroundMat = new BABYLON.StandardMaterial("largeGroundMat");
largeGroundMat.diffuseTexture = new BABYLON.Texture("url to large ground texture");

const largeGround = BABYLON.MeshBuilder.CreateGroundFromHeightMap("largeGround", "url to heightmap", 
    {width:150, height:150, subdivisions: 20, minHeight:0, maxHeight: 4});
largeGround.material = largeGroundMat;
largeGround.position.y = -0.01;
```

ã¡ãªã¿ã«ã€ã“ã®è¡Œ

```js
largeGround.position.y = -0.01;
```
ã¯ã€ãµãŸã¤ã®åœ°é¢ (`largeGround` ã¨ `ground`) ãŒè¡çªã—ã¦ ã¡ã‚‰ã¤ãã‚’å¼•ãèµ·ã“ã•ãªã„ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã‚‚ã®ã§ã™ã€‚

â†“ `largeGround` ã‚’éš ã—ã¦ `ground` ã®ã¿è¡¨ç¤ºã—ãŸã‚‚ã® ([Playground](https://playground.babylonjs.com/#KBS9I5#85) ã®ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ã§ç¢ºèª)
![](https://storage.googleapis.com/zenn-user-upload/69f1d3a07bfc-20220429.png)


@[codepen](https://codepen.io/chomado/pen/KKQPeLP)

â†‘ ãƒã‚¦ã‚¹ã§ã‚°ãƒªã‚°ãƒªã§ãã¾ã™

https://playground.babylonjs.com/#KBS9I5#85

## ğŸ  å®¶ã‚’è¿½åŠ 

![](https://storage.googleapis.com/zenn-user-upload/f0fcbba76f81-20220429.gif)

https://playground.babylonjs.com/#KBS9I5#86

## ğŸš™ è»Šã‚’è¿½åŠ 

è»Šã‚’è¿½åŠ ã—ç›´ã—ã¾ã—ãŸãŒã€ä»Šå›ã¯ãŸã æ‘ã‚’é€šéã™ã‚‹ã ã‘ã«ã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/334b2e3c980b-20220429.gif)

https://playground.babylonjs.com/#KBS9I5#87

# â˜ æ¬¡ã¸

ã‚‚ã£ã¨ç’°å¢ƒã‚’è‰¯ãã™ã‚‹ãŸã‚ã«ã€ç©ºã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ã‚‡ã†

# ğŸ‘€ å‚è€ƒ

Creating Ground From a Height Map (ãƒã‚¤ãƒˆãƒãƒƒãƒ—ã‹ã‚‰åœ°é¢ã‚’ç”Ÿæˆã™ã‚‹)
https://doc.babylonjs.com/divingDeeper/mesh/creation/set/ground_hmap