---
title: "3-04: è»Šè¼ªã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ (Wheel Animation)"
---

ã“ã®ãƒšãƒ¼ã‚¸ã®åŸæ–‡ï¼š https://doc.babylonjs.com/start/chap3/animation

# ğŸš™ 3-04: è»Šè¼ªã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ (Wheel Animation)

![](https://storage.googleapis.com/zenn-user-upload/3fe8fc494a2c-20220329.gif)

## ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºç¤

è»Šè¼ªã‚’å›è»¢ã•ã›ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
è»Šã‚’ç›´ç«‹ã•ã›ã‚‹ãŸã‚ã«ã€x è»¸ã‚’ä¸­å¿ƒã«å›è»¢ã•ã›ã€è»Šè¼ª (ã‚¿ã‚¤ãƒ¤) ã®å††æŸ±ãŒ y è»¸ã«å¹³è¡Œã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

æ–°ã—ã„ `Animation` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚

```js
const animWheel = new BABYLON.Animation(
    "wheelAnimation", 
    "rotation.y", 
    30, 
    BABYLON.Animation.ANIMATIONTYPE_FLOAT, 
    BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE
);
```

ã“ã®ãã‚Œãã‚Œã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã¤ã„ã¦ã€‚
åå‰ `name`ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ `targetProperty`ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã® FPS (frames per second, 1 ç§’ã‚ãŸã‚Šã®ãƒ•ãƒ¬ãƒ¼ãƒ æ•°) `framePerSecond` ã€[ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—](https://doc.babylonjs.com/typedoc/classes/babylon.animation#animationtype_color3)ã€[ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ«ãƒ¼ãƒ—ãƒ¢ãƒ¼ãƒ‰](https://doc.babylonjs.com/typedoc/classes/babylon.animation#animationloopmode_constant) (ç¹°ã‚Šè¿”ã™ãªã©)ã€ ã¨ã„ã†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¦ã„ã¾ã™ã€‚

:::message
BABYLON.Animation ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã¤ã„ã¦ã€‚
Animation(
    `name`: string, 
    `targetProperty`: string, 
    `framePerSecond`: number, 
    `dataType`: number, 
    `loopMode`?: number | undefined, 
    `enableBlending`?: boolean | undefined
)
:::

https://doc.babylonjs.com/typedoc/classes/babylon.animation

ã“ã‚Œã«ç¶šã„ã¦ã€ãƒ•ãƒ¬ãƒ¼ãƒ ç•ªå·ã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å€¤ã‚’è¨­å®šã™ã‚‹ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ é…åˆ—ãŒç¶šãã¾ã™ã€‚

```js
const wheelKeys = []; 

// ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ  (ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚­ãƒ¼) ãŒ 0 ã®ã¨ãã€
// rotation.y ã« 0 ã‚’è¨­å®š
wheelKeys.push({
    frame: 0,
    value: 0
});

// ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ãŒ 30 (30 FPS ãªã®ã§ 1 ç§’å¾Œã®ã“ã¨) ã®ã¨ãã€
// rotation.y ã« 2PI (360åº¦) ã‚’è¨­å®šã—ä¸€å›è»¢ã‚’è¡¨ã™
wheelKeys.push({
    frame: 30,
    value: 2 * Math.PI
});
```

æœ€å¾Œã«ã€ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ é…åˆ—ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒªãƒ³ã‚¯ã—ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ¡ãƒƒã‚·ãƒ¥ã«ãƒªãƒ³ã‚¯ã—ã¦é–‹å§‹ã—ã¾ã™ã€‚

```js
// ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ã‚»ãƒƒãƒˆ
animWheel.setKeys(wheelKeys);

//Link this animation to the right back wheel
// ã“ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å³å¾Œã‚ã®è»Šè¼ªã«ãƒªãƒ³ã‚¯ã™ã‚‹
wheelRB.animations = [];
wheelRB.animations.push(animWheel);

//Begin animation - object to animate, first frame, last frame and loop if true
// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã™ã‚‹
scene.beginAnimation(wheelRB, 0, 30, true);
```

:::message
`beginAnimation` ã®å¼•æ•°
scene.beginAnimation(`target`, `from`, `to`, `loop(true)`)
    * `target` - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®å¯¾è±¡ã«ã™ã‚‹ Object
    * `from` - ã©ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¹ã‚¿ãƒ¼ãƒˆã«ã™ã‚‹ã‹
    * `to` - ã©ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®çµ‚äº†ã«ã™ã‚‹ã‹
:::

https://doc.babylonjs.com/divingDeeper/animation/animation_method

ã™ã¹ã¦ã®è»Šè¼ªã‚’åŒã˜ã‚ˆã†ã«å›è»¢ã•ã›ã‚‹ãŸã‚ã€ã™ã¹ã¦ã«åŒã˜ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```js
scene.beginAnimation(wheelRF, 0, 30, true);
scene.beginAnimation(wheelLB, 0, 30, true);
scene.beginAnimation(wheelLF, 0, 30, true);
```
